(()=>{class e{createBarChart(e){let t=document.createElement("div");t.id="chart";let n=["Item A","Item B","Item C","Item D","Item E"],s=[30,60,45,80,100];for(let e=0;e<n.length;++e){let r=document.createElement("div");r.classList.add("row");let a=document.createElement("div");a.classList.add("label"),a.innerText=n[e];let o=document.createElement("div");o.classList.add("bar"),o.style.width=`${s[e]}%`,r.appendChild(a),r.appendChild(o),t.appendChild(r)}return t}}function t(){return document.querySelector("#amsOuterResponse")?.shadowRoot?.querySelector("#amsInnerResponse")}function n(e=!0){e?document.querySelector("#amsOuterResponse").classList.remove("show"):document.querySelector("#amsOuterResponse").classList.add("show"),t().classList.remove("error"),t().classList.remove("thinking"),t().querySelector("#amsContent").innerHTML=""}(async()=>{browser.runtime.onMessage.addListener(async s=>{var r,a,o;if(s?.type)switch(function(){if(document.querySelector("#amsOuterResponse"))return;let e=document.createElement("div");e.id="amsOuterResponse";let t=e.attachShadow({mode:"open"}),s=document.createElement("div");s.id="amsInnerResponse",t.appendChild(s);let r=document.createElement("link");r.rel="stylesheet",r.href=browser.runtime.getURL("/messageDisplay/messageDisplayScripts.css"),s.appendChild(r);let a=document.createElement("img");a.id="amsImage",a.src=browser.runtime.getURL("/images/bot-icon-color-64.webp"),s.appendChild(a);let o=document.createElement("div");o.id="amsContent",s.appendChild(o);let c=document.createElement("img");c.id="amsClose",c.src=browser.runtime.getURL("/images/close-icon.svg"),c.addEventListener("click",()=>n()),s.appendChild(c),document.body.insertBefore(e,document.body.firstChild)}(),s.type){case"addAudio":!function(e){n(!1);let s=new FileReader;s.onload=()=>{let e=s.result,n=document.createElement("audio");n.src=e,n.autoplay=!0,n.controls=!0,t().querySelector("#amsContent").appendChild(n)},s.readAsDataURL(e)}(s.content);break;case"addChart":!function(s){n(!1);let r=new e;t().querySelector("#amsContent").append(r.createBarChart(s))}(s.content);break;case"addText":r=s.content,n(!1),t().querySelector("#amsContent").textContent=r;break;case"showError":a=s.content,n(!1),t().classList.add("error"),t().querySelector("#amsContent").textContent=a;break;case"thinking":o=s.content,n(!1),t().classList.add("thinking"),t().querySelector("#amsContent").innerHTML=`${o}<span class="dots"></span>`}})})()})();